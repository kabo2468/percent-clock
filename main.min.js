let dateDiff,updateOffset,nowDate,updateFreq=500;const formatDate=e=>{"use strict";const t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=e.getHours(),s=e.getMinutes(),D=e.getSeconds();return`${t}年${a}月${n}日 ${o}時${String(s).padStart(2,"0")}分${String(D).padStart(2,"0")}秒`},getDaysLeapYear=e=>e<4?365:e%4==0&&e%100!=0||e%400==0?366:365,getDaysCentury=e=>{const t=new Date(100*(e-1)+1,1,1),a=new Date(100*e+1,1,1),n=a-t;return n/1e3/60/60/24},getDateOffset=()=>{"use strict";const e=Date.now();$.ajax({type:"GET",url:`https://ntp-a1.nict.go.jp/cgi-bin/json?${e/1e3}`,dataType:"json"}).done(function(t){dateDiff=1e3*t.st+(e-1e3*t.it)/2-e}).fail(function(){dateDiff=0}),updateOffset=!0},setValue=(e,t)=>{$(`#${e}`).attr("aria-valuenow",100*t),$(`#${e}`).css("width",`${100*t}%`),$(`#${e}`).text(`${(100*t).toFixed(2)} %`)},clock=()=>{"use strict";nowDate=new Date(Date.now()+dateDiff),void 0!==dateDiff&&$("#now-clock-text").html(formatDate(nowDate)),30===nowDate.getSeconds()?!1===updateOffset&&getDateOffset():updateOffset=!1;const e=nowDate.getMilliseconds()/1e3,t=(nowDate.getSeconds()+e)/60,a=(nowDate.getMinutes()+t)/60,n=(nowDate.getHours()+a)/24,o=(nowDate.getDay()+n)/7,s=(nowDate.getDate()-1+n)/new Date(nowDate.getFullYear(),nowDate.getMonth()+1,0).getDate();let D=0;for(let e=0;e<nowDate.getMonth();e++)D+=new Date(nowDate.getFullYear(),e+1,0).getDate();const u=(D+nowDate.getDate()-1+n)/getDaysLeapYear(nowDate.getFullYear()),r=new Date(100*(Math.floor((nowDate.getFullYear()+99)/100)-1)+1,1,1),l=nowDate.getTime()-r,g=l/1e3/60/60/24,f=g/getDaysCentury(Math.floor((nowDate.getFullYear()+99)/100));setValue("minute",t),setValue("hour",a),setValue("day",n),setValue("week",o),setValue("month",s),setValue("year",u),setValue("century",f),setTimeout(clock,updateFreq)};(()=>{"use strict";getDateOffset()})(),$(()=>{"use strict";clock()}),$("#ok-btn").on("click",function(){updateFreq=$("#update-freq").val()});